<html>
  <head>
    <title>New Tab - ChromeTabPlus</title>
    <link
      rel="stylesheet"
      href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"
    />
    <link
      rel="stylesheet"
      href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
    <!-- Local jQuery scripts (MV3 compliant) -->
    <script src="jquery.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <style>
      /* Zen mode hides everything except the time and greeting text */
      body.zen-mode #notesText,
      body.zen-mode #todoContainer,
      body.zen-mode #bottomNotesText,
      body.zen-mode #bgImagesDataContainer,
      body.zen-mode #countdownContainer,
      body.zen-mode #timerToggleButton,
      body.zen-mode #backgroundTip,
      body.zen-mode #projectControls {
        display: none !important;
      }
    </style>
    <script src="timer-module.js"></script>
    <script src="newTab.js"></script>
  </head>
  <!-- <body id="bodyid" background="/wallpaper/BC.jpg"> -->
  <body
    id="bodyid"
    style="
      background-repeat: no-repeat;
      background-size: cover;
      transition: background 1s linear;
      width: 1800px;
      height: 900px;
    "
  >
    <!-- Zen Mode Toggle (always visible) -->
    <div
      id="zenModeButton"
      style="
        position: absolute;
        top: 20px;
        right: 340px; /* avoid overlap with TODO container at right */
        z-index: 1000;
      "
    >
      <button
        id="toggleZenBtn"
        style="
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
        "
      >
        Zen
      </button>
    </div>
    <!-- Add this new div for the top-left notes -->
    <div
      id="notesText"
      style="
        position: absolute;
        top: 20px;
        left: 20px;
        color: white;
        text-align: left;
      "
    >
      <button
        id="toggleTopNotes"
        style="
          background: rgba(0, 0, 0, 0.7);
          color: white;
          border: none;
          padding: 5px 10px;
          border-radius: 5px;
          cursor: pointer;
          margin-bottom: 10px;
        "
      >
        Toggle Notes
      </button>
      <h2
        id="notes"
        style="
          font-size: 24px;
          font-weight: 400;
          text-shadow: 2px 2px #000000;
          color: #dddddd;
          cursor: pointer;
          white-space: pre-wrap;
        "
        contenteditable="true"
      >
        Click to add notes
      </h2>
    </div>

    <!-- Add the TODO sticky notes container -->
    <div
      id="todoContainer"
      style="
        position: absolute;
        top: 20px;
        right: 20px;
        width: 300px;
        max-height: 80vh;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 100;
      "
    >
      <div
        id="todoControlsTop"
        style="
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 5px;
          flex-wrap: nowrap;
        "
      >
        <button
          id="toggleTodoViewBtn"
          style="
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
            margin-right: 5px;
          "
        >
          Settings
        </button>
        <button
          id="toggleTodosVisibilityBtn"
          style="
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
            margin-right: 5px;
          "
        >
          Hide
        </button>
        <button
          id="addTodoBtn"
          style="
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
          "
        >
          + Add Todo
        </button>
      </div>
      <div id="projectControls" style="margin-bottom: 10px; display: none">
        <!-- Project selector will be dynamically added here -->
      </div>
      <div id="activeTodosContainer">
        <div id="todoList">
          <!-- Active Todos will be dynamically added here -->
        </div>
      </div>
      <div id="deletedTodosContainer" style="display: none">
        <div
          style="
            display: flex;
            justify-content: flex-end;
            margin-bottom: 5px;
            gap: 5px;
          "
        >
          <button
            id="importJsonBtn"
            style="
              background: rgba(0, 0, 0, 0.7);
              color: white;
              border: none;
              padding: 6px 12px;
              border-radius: 5px;
              cursor: pointer;
              font-size: 12px;
            "
          >
            Import JSON
          </button>
          <button
            id="exportJsonBtn"
            style="
              background: rgba(0, 0, 0, 0.7);
              color: white;
              border: none;
              padding: 6px 12px;
              border-radius: 5px;
              cursor: pointer;
              font-size: 12px;
            "
          >
            Export JSON
          </button>
          <button
            id="migrateTodosBtn"
            style="
              background: rgba(40, 167, 69, 0.8);
              color: white;
              border: none;
              padding: 6px 12px;
              border-radius: 5px;
              cursor: pointer;
              font-size: 12px;
            "
          >
            Migrate TODOs
          </button>
          <button
            id="permanentDeleteAllBtn"
            style="
              background: rgba(220, 53, 69, 0.8);
              color: white;
              border: none;
              padding: 6px 12px;
              border-radius: 5px;
              cursor: pointer;
              font-size: 12px;
            "
          >
            Delete All Permanently
          </button>
        </div>
        <div id="deletedTodoList">
          <!-- Deleted Todos will be dynamically added here -->
        </div>

        <!-- Add Background Settings Section -->
        <div
          style="
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 5px;
            margin-bottom: 15px;
          "
        >
          <h4 style="margin-top: 0; font-size: 14px; font-weight: bold">
            Background Settings
          </h4>
          <div style="display: flex; gap: 8px; margin-top: 8px">
            <button
              id="toggleBgImagesData"
              style="
                background: rgba(0, 0, 0, 0.7);
                color: white;
                border: none;
                padding: 6px 12px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 12px;
                flex: 1;
              "
            >
              Show BG Images
            </button>
            <button
              id="showRawStorageData"
              style="
                background: rgba(0, 0, 0, 0.7);
                color: white;
                border: none;
                padding: 6px 12px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 12px;
                flex: 1;
              "
            >
              Storage Data
            </button>
            <button
              id="checkStorageUsage"
              style="
                background: rgba(0, 0, 0, 0.7);
                color: white;
                border: none;
                padding: 6px 12px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 12px;
                flex: 1;
              "
            >
              Check Usage
            </button>
          </div>
        </div>

        <!-- Add Text Size Settings Section -->
        <div
          style="
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 5px;
            margin-bottom: 15px;
          "
        >
          <h4 style="margin-top: 0; font-size: 14px; font-weight: bold">
            Text Size Settings
          </h4>
          <div style="margin-bottom: 10px">
            <label style="font-size: 12px; display: block; margin-bottom: 5px">
              Clock Size:
            </label>
            <div style="display: flex; gap: 5px; align-items: center">
              <button
                id="decreaseClockSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                "
              >
                -
              </button>
              <span
                id="clockSizeDisplay"
                style="font-size: 12px; min-width: 50px; text-align: center"
                >128px</span
              >
              <button
                id="increaseClockSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                "
              >
                +
              </button>
              <button
                id="resetClockSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                  margin-left: 5px;
                "
              >
                Reset
              </button>
            </div>
          </div>
          <div style="margin-bottom: 10px">
            <label style="font-size: 12px; display: block; margin-bottom: 5px">
              Greeting Size:
            </label>
            <div style="display: flex; gap: 5px; align-items: center">
              <button
                id="decreaseGreetingSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                "
              >
                -
              </button>
              <span
                id="greetingSizeDisplay"
                style="font-size: 12px; min-width: 50px; text-align: center"
                >96px</span
              >
              <button
                id="increaseGreetingSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                "
              >
                +
              </button>
              <button
                id="resetGreetingSize"
                style="
                  background: rgba(0, 0, 0, 0.7);
                  color: white;
                  border: none;
                  padding: 4px 8px;
                  border-radius: 3px;
                  cursor: pointer;
                  font-size: 12px;
                  margin-left: 5px;
                "
              >
                Reset
              </button>
            </div>
          </div>
        </div>

        <div
          style="
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border-radius: 5px;
            font-size: 13px;
            text-align: center;
            cursor: pointer;
          "
          id="backgroundTip"
        >
          <p style="margin: 0">
            Tip: Navigate backgrounds with the time
            <br />
            <span style="font-size: 11px">
              (Hours side = next, Minutes side = previous)
            </span>
            <br />
            <span style="font-size: 11px; margin-top: 5px; display: block">
              Select your background images in Chrome Extensions > ChromeTabPlus
              > Options
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Timer Toggle Button (always visible) -->
    <div
      id="timerToggleButton"
      style="
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 60;
        display: none;
      "
    >
      <button
        id="showTimerBtn"
        style="
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
        "
      >
        Show Timer
      </button>
    </div>

    <!-- Countdown Timer Section -->
    <div
      id="countdownContainer"
      style="
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        text-align: center;
        background: rgba(0, 0, 0, 0.7);
        padding: 15px 20px;
        border-radius: 10px;
        min-width: 400px;
        z-index: 50;
      "
    >
      <!-- Timer Display -->
      <div
        id="timerDisplay"
        style="
          font-size: 32px;
          font-weight: bold;
          margin-bottom: 10px;
          color: #ffffff;
          text-shadow: 2px 2px 4px #000000;
          cursor: text;
          min-width: 150px;
          outline: none;
        "
        contenteditable="false"
        data-placeholder="00:00"
      >
        00:00:00
      </div>

      <!-- Timer Label -->
      <div
        id="timerLabel"
        style="
          font-size: 16px;
          margin-bottom: 15px;
          color: #dddddd;
          min-height: 20px;
        "
        contenteditable="true"
        placeholder="Enter timer description..."
      >
        Timer
      </div>

      <!-- Timer Controls -->
      <div
        style="
          display: flex;
          gap: 10px;
          justify-content: center;
          align-items: center;
          margin-bottom: 10px;
        "
      >
        <!-- Start/Pause Button -->
        <button
          id="startPauseBtn"
          style="
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
          "
        >
          Start
        </button>

        <!-- Reset Button -->
        <button
          id="resetBtn"
          style="
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
          "
        >
          Reset
        </button>

        <!-- Hide/Show Button -->
        <button
          id="toggleTimerBtn"
          style="
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
          "
        >
          Hide
        </button>
      </div>
    </div>

    <div
      id="greetingText"
      style="
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translateX(-50%) translateY(-50%);
        color: white;
        text-align: center;
        z-index: 60;
      "
    >
      <h1
        id="time"
        style="
          font-size: 128px;
          font-weight: 700;
          text-shadow: 4px 4px 4px #000000;
          color: #dddddd;
        "
      ></h1>
      <h1
        id="helloText"
        style="
          font-size: 96px;
          font-weight: 500;
          text-shadow: 4px 4px #000000;
          color: #dddddd;
          cursor: pointer;
          white-space: pre-wrap;
        "
        contenteditable="true"
      >
        Sup, Rockstar
      </h1>
    </div>

    <!-- Add this new div for the bottom-right notes -->
    <div
      id="bottomNotesText"
      style="
        position: absolute;
        bottom: 20px;
        right: 20px;
        color: white;
        text-align: right;
      "
    >
      <h2
        id="bottomNotes"
        style="
          font-size: 24px;
          font-weight: 400;
          text-shadow: 2px 2px #000000;
          color: #dddddd;
          cursor: pointer;
          white-space: pre-wrap;
          margin-bottom: 10px;
        "
        contenteditable="true"
      >
        Click to add bottom notes
      </h2>
      <button
        id="toggleBottomNotes"
        style="
          background: rgba(0, 0, 0, 0.7);
          color: white;
          border: none;
          padding: 5px 10px;
          border-radius: 5px;
          cursor: pointer;
          text-align: right;
          display: block;
          margin-left: auto;
        "
      >
        Toggle Notes
      </button>
    </div>

    <!-- Add new div for background images data in bottom left -->
    <div
      id="bgImagesDataContainer"
      style="
        position: absolute;
        bottom: 20px;
        left: 20px;
        color: white;
        text-align: left;
        background: rgba(0, 0, 0, 0.7);
        padding: 10px;
        border-radius: 5px;
        max-width: 300px;
        max-height: 300px;
        overflow-y: auto;
        display: none;
      "
    >
      <div id="bgImagesData" style="margin-bottom: 10px">
        <!-- Background images data will be dynamically added here -->
      </div>
    </div>
  </body>
</html>
